%% Integration with calendaring

%% Arguments: 
%% 1st: Name of the key (without prefix and suffix
%% 2nd: code to be executed
\newcommand{\defineDayKey}[2]{
\pgfkeys{/tikz/#1 day/.code =
  {
    \draw (-\cellwidth,0) node [above right,font=\Huge]
    {#2};
  }
}
}

\defineDayKey{flag-flying}{\hspace*{-.2cm}\resizebox{!}{0.8ex}{\usebox{\flagRU}}}
\defineDayKey{flag-finland}{\hspace*{-.2cm}\usebox{\flagFIN}}
\defineDayKey{flag-aland}{\usebox{\flagAland}}
\defineDayKey{flag-spb-aland}{\hspace*{-.2cm}\usebox{\flagAland}\resizebox{!}{0.8ex}{\usebox{\flagSpb}}}
\defineDayKey{flag-sv-finland}{\hspace*{-.2cm}\usebox{\flagSvFIN}}
\defineDayKey{flag-victory}{\resizebox{!}{1.75ex}{\flagVictory}}
\defineDayKey{flag-navy}{\resizebox{!}{0.8ex}{\flagRusNavy}}
\defineDayKey{flag-airborne}{\resizebox{!}{0.8ex}{\flagRusAirborne} \resizebox{!}{0.8ex}{\usebox{\OrthodoxChrist}}}
\defineDayKey{flag-rus-orthodox}{\resizebox{!}{0.8ex}{\usebox{\flagRU}} \resizebox{!}{0.8ex}{\usebox{\OrthodoxChrist}}}
\defineDayKey{flag-fin-orthodox}{\resizebox{!}{0.8ex}{\usebox{\flagFIN}} \resizebox{!}{0.8ex}{\usebox{\OrthodoxChrist}}}
\defineDayKey{flag-rus-fin}{\hspace*{-.2cm}\usebox{\flagFIN}\resizebox{!}{0.8ex}{\usebox{\flagRU}}}
\defineDayKey{flag-spb-orthodox}{\resizebox{!}{0.8ex}{\usebox{\flagSpb}} \resizebox{!}{0.8ex}{\usebox{\OrthodoxChrist}}}
\defineDayKey{flag-space}{\resizebox{!}{0.8ex}{\flagRusSpace}}
\defineDayKey{flag-kgb}{\resizebox{!}{0.8ex}{\flagKGB}}
\defineDayKey{flag-spb}{\resizebox{!}{0.8ex}{\usebox{\flagSpb}}}
\defineDayKey{flag-military}{\resizebox{!}{0.8ex}{\usebox{\flagRusDefence}}}
\defineDayKey{flag-orthodox}{\resizebox{!}{0.8ex}{\usebox{\OrthodoxChrist}}}

%% Flag of Russia
\definecolor{myred}{RGB}{216,30,5}
\definecolor{myblue}{RGB}{0,81,186}

\newsavebox{\flagRU}
\savebox{\flagRU}{
\begin{tikzpicture}
\fill[myred] rectangle (18pt,5pt);
\fill[myblue,yshift=5pt] rectangle (18pt,5pt);
\draw rectangle (18pt,15pt);
\end{tikzpicture}
}

%% Flag of Russian Navy
\definecolor{cfff}{RGB}{255,255,255}
\definecolor{c0039a6}{RGB}{0,57,166}

\newcommand{\flagRusNavy}{%
\begin{tikzpicture}[y=0.80pt,x=0.80pt,yscale=-1, inner sep=0pt, outer sep=0pt]
% rect3037
\path[fill=cfff,rounded corners=0.0000cm] (0.0000,0.0000) rectangle
  (30.0000,20.0000);
% path3039
\path[draw=c0039a6,line width=2.400pt] (0.0000,0.0000) --
  (30.0000,20.0000)(0.0000,20.0000) -- (30.0000,0.0000);
\end{tikzpicture}}

%% Orthodoxy christ
\input{flags/orthodox}

%% Flags of Finland and Swedish Speaking Finns
\newcommand{\flagFinSv}[2]{
\resizebox{!}{.45cm}{%
\begin{tikzpicture}[y=0.80pt,x=0.80pt,yscale=-1, inner sep=0pt, outer sep=0pt]
% rect4
\path[fill=#1,rounded corners=0.0000cm] (0.0000,0.0000) rectangle
  (1800.0000,1100.0000);
% rect6
\path[fill=#2,rounded corners=0.0000cm] (0.0000,400.0000) rectangle
  (1800.0000,700.0000);
% rect8
\path[fill=#2,rounded corners=0.0000cm] (500.0000,0.0000) rectangle
  (800.0000,1100.0000);
\end{tikzpicture}}}

%% Flag of Finland
\definecolor{cfff}{RGB}{255,255,255}
\definecolor{c003580}{RGB}{0,53,128}
\newsavebox{\flagFIN}
\savebox{\flagFIN}{\flagFinSv{cfff}{c003580}}

%% Flag of Swedish Speaking finns
\definecolor{scfff}{HTML}{FF0000}
\definecolor{sc003580}{HTML}{FFFF00}
\newsavebox{\flagSvFIN}
\savebox{\flagSvFIN}{\flagFinSv{scfff}{sc003580}}

%% Flag of Ã…land
\definecolor{c0053a5}{RGB}{0,83,165}
\definecolor{cffce00}{RGB}{255,206,0}
\definecolor{cd21034}{RGB}{210,16,52}

\newsavebox{\flagAland}
\savebox{\flagAland}{%
\resizebox{!}{.45cm}{\begin{tikzpicture}[y=0.80pt,x=0.80pt,yscale=-1, inner sep=0pt, outer sep=0pt]
% rect3
\path[fill=c0053a5,rounded corners=0.0000cm] (0.0000,0.0000) rectangle
  (1300.0000,850.0000);

\begin{scope}[fill=cffce00]% g5
  % rect7
  \path[fill,rounded corners=0.0000cm] (400.0000,0.0000) rectangle
    (650.0000,850.0000);
  % rect9
  \path[fill,rounded corners=0.0000cm] (0.0000,300.0000) rectangle
    (1300.0000,550.0000);
\end{scope}
\begin{scope}[fill=cd21034]% g11
  % rect13
  \path[fill,rounded corners=0.0000cm] (475.0000,0.0000) rectangle
    (575.0000,850.0000);
  % rect15
  \path[fill,rounded corners=0.0000cm] (0.0000,375.0000) rectangle
    (1300.0000,475.0000);
\end{scope}
\end{tikzpicture}}}

%% Path to the images with flags. Use only in command but not in boxes! See examples below.
\def\resources{../../resources/flags}

%% Flag of the Russian Space Troops
\newcommand{\flagRusSpace}{\includegraphics{\resources/SpaceFlag.png}}

%% Flag of the Russian Arborne Troops
\newcommand{\flagRusAirborne}{\includegraphics{\resources/RusAirborne.png}}

%% St. Petersburg flag
\newsavebox{\flagSpb}
\savebox{\flagSpb}{\includegraphics{flags/SpbFlag.pdf}}

%% Flag of the Russian Ministry of Defence
\newsavebox{\flagRusDefence}
\savebox{\flagRusDefence}{\includegraphics{flags/RusDefence.png}}

%% Saint George ribbon - Vicory Day. 9, May.
\newcommand{\flagVictory}{\rotatebox{90}{\includegraphics{\resources/9May.png}}}

%% FSB flag
\input{flags/fsb}
